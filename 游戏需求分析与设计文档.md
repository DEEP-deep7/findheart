# 像素爱心收集小游戏 - 需求分析与设计文档

## 1. 项目概述

### 1.1 项目背景
用户希望开发一款简单的网页小游戏，无需部署服务器，可单机游玩。游戏采用像素风格，玩家控制角色收集爱心并获得温馨反馈。

### 1.2 项目目标
- 创建一个无需部署、可单机运行的网页小游戏
- 实现像素风格的视觉效果
- 提供简单直观的游戏玩法
- 营造温馨浪漫的游戏氛围

## 2. 核心需求分析

### 2.1 用户需求拆解
| 需求点 | 详细描述 |
|--------|----------|
| 游戏类型 | 网页小游戏，无需部署，单机运行 |
| 视觉风格 | 像素风格（Pixel Art） |
| 核心玩法 | 玩家控制像素小人在地图上移动 |
| 游戏目标 | 寻找并收集地图上的爱心 |
| 反馈机制 | 收集爱心后屏幕上方显示温馨/暧昧话语 |

### 2.2 功能需求分析

#### 2.2.1 玩家控制系统
- **控制方式**：键盘方向键（上下左右）+ WASD键支持
- **移动逻辑**：平滑移动，有边界限制
- **角色反馈**：简单的移动动画（方向变化）

#### 2.2.2 地图与场景
- **地图类型**：2D平面地图
- **地图边界**：防止玩家移出可视区域
- **场景元素**：背景、爱心目标物

#### 2.2.3 爱心收集系统
- **爱心生成**：游戏开始时随机分布在地图上
- **爱心数量**：可配置（建议初始10个）
- **收集机制**：角色与爱心碰撞检测
- **状态更新**：收集后爱心消失，计数更新

#### 2.2.4 文本反馈系统
- **文本内容**：温馨/暧昧话语库（至少20条）
- **触发条件**：成功收集爱心时
- **显示位置**：屏幕上方中央
- **显示效果**：淡入淡出动画
- **显示时长**：约3秒后自动消失

#### 2.2.5 游戏信息系统
- **爱心计数**：已收集数量/总数量
- **控制说明**：游戏操作提示

### 2.3 非功能需求

#### 2.3.1 技术需求
- **技术栈**：HTML5 + CSS3 + JavaScript（原生）
- **渲染技术**：Canvas API（像素风格渲染）
- **兼容性**：支持现代浏览器（Chrome、Firefox、Safari、Edge）
- **响应式**：适配不同屏幕尺寸

#### 2.3.2 用户体验需求
- **操作简单**：直观的键盘控制
- **视觉舒适**：像素风格，色彩协调
- **反馈及时**：收集爱心后立即显示文本
- **流畅运行**：无明显卡顿

#### 2.3.3 部署需求
- **无需服务器**：纯前端实现，本地HTML文件直接运行
- **文件结构**：单一HTML文件或少量关联文件

## 3. 技术实现方案

### 3.1 技术架构
```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   HTML结构层    │────▶│   CSS样式层     │────▶│  JavaScript逻辑层│
└─────────────────┘     └─────────────────┘     └─────────────────┘
        │                         │                         │
        ▼                         ▼                         ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│ 游戏基本布局    │     │ 像素风格设计    │     │ 游戏核心逻辑    │
│ - 标题区域      │     │ - 字体选择      │     │ - 玩家控制      │
│ - 文本显示区    │     │ - 颜色方案      │     │ - 碰撞检测      │
│ - 游戏画布      │     │ - 动画效果      │     │ - 爱心生成      │
│ - 信息区域      │     │ - 响应式布局    │     │ - 文本反馈      │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

### 3.2 核心技术实现

#### 3.2.1 游戏渲染
- 使用Canvas API进行像素风格渲染
- 禁用图像平滑处理，保持像素效果
- 分层绘制：背景层 → 游戏元素层 → 角色层

#### 3.2.2 玩家控制
- 监听键盘事件（keydown/keyup）
- 实现按键状态管理
- 根据按键状态更新角色位置
- 添加边界检测防止角色移出屏幕

#### 3.2.3 碰撞检测
- 轴对齐边界框（AABB）碰撞检测算法
- 实时检测角色与爱心的位置关系
- 触发收集事件和文本显示

#### 3.2.4 文本动画
- CSS过渡动画实现淡入淡出效果
- JavaScript控制动画触发和时长
- 随机选择文本内容

### 3.3 文件结构设计
```
pixel-heart-game/
├── index.html          # 主HTML文件
├── style.css           # 样式文件
└── game.js             # 游戏逻辑文件
```

## 4. 游戏界面设计

### 4.1 界面布局
```
┌─────────────────────────────────────────────────────────┐
│                     游戏标题区域                        │
├─────────────────────────────────────────────────────────┤
│                     文本显示区域                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│                                                         │
│                     游戏画布区域                        │
│                                                         │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                     游戏信息区域                        │
└─────────────────────────────────────────────────────────┘
```

### 4.2 视觉设计规范

#### 4.2.1 色彩方案
- **主色调**：蓝色系（角色）+ 红色系（爱心）
- **背景色**：淡蓝色渐变
- **文本色**：白色 + 红色强调
- **边框色**：深蓝色系

#### 4.2.2 像素风格要素
- **像素字体**：Press Start 2P（Google Fonts）
- **像素图形**：使用Canvas绘制方形像素元素
- **图像渲染**：禁用平滑处理，保持锐利边缘

## 5. 游戏流程设计

### 5.1 游戏启动流程
1. 用户打开HTML文件
2. 页面加载完成，初始化游戏
3. 生成随机分布的爱心
4. 显示游戏标题和控制说明
5. 等待玩家输入

### 5.2 游戏主循环
1. 检测键盘输入
2. 更新角色位置
3. 检测碰撞（角色与爱心）
4. 处理收集事件
5. 更新爱心计数
6. 显示反馈文本
7. 重绘游戏画面
8. 循环执行

### 5.3 爱心收集流程
1. 角色与爱心碰撞
2. 爱心从地图上移除
3. 已收集计数+1
4. 从文本库随机选择一条话语
5. 触发文本显示动画
6. 3秒后文本自动消失

### 5.4 游戏重置流程
1. 所有爱心收集完成
2. 短暂延迟后
3. 重新生成爱心
4. 重置收集计数
5. 游戏继续

## 6. 资源需求

### 6.1 文本资源
- **温馨话语库**：至少20条温馨/暧昧语句
- **游戏标题**：像素爱心收集者
- **控制说明**：使用方向键控制角色移动

### 6.2 技术资源
- **字体资源**：Google Fonts - Press Start 2P
- **技术文档**：Canvas API文档、CSS动画文档

## 7. 开发与测试计划

### 7.1 开发阶段
1. **需求分析与设计**：1天
2. **HTML结构搭建**：0.5天
3. **CSS样式实现**：1天
4. **JavaScript逻辑开发**：2天
5. **整合与测试**：1天

### 7.2 测试要点
- **功能测试**：玩家控制、爱心收集、文本显示
- **兼容性测试**：主流浏览器适配
- **响应式测试**：不同屏幕尺寸
- **性能测试**：游戏运行流畅度

## 8. 交付标准

### 8.1 功能完整性
- 玩家可正常控制角色移动
- 爱心可随机生成和收集
- 文本反馈系统正常工作
- 游戏计数准确显示

### 8.2 技术标准
- 纯前端实现，无需服务器
- 单一HTML文件或少量关联文件
- 支持本地直接运行
- 代码结构清晰，注释完整

### 8.3 文档交付
- 游戏需求分析与设计文档
- 游戏操作说明

## 9. 后续优化建议

### 9.1 功能扩展
- 添加角色动画效果
- 增加游戏音效
- 设计多个游戏场景
- 添加难度级别选择

### 9.2 用户体验优化
- 添加触摸控制支持（移动设备）
- 优化像素图形细节
- 增加游戏背景音乐
- 添加得分系统和排行榜

### 9.3 技术优化
- 代码模块化重构
- 性能优化（减少重绘）
- 添加游戏状态保存功能
- 实现Webpack打包优化